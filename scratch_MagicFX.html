<!DOCTYPE html>
<html>
<body>

<p id="demo">Test</p>

<button onclick="myFunction()">Try it</button>

<script>

function randomPick(array) {
	var randomNumber = Math.floor(Math.random() * (array.length));
	return array[randomNumber];
}

function print(str) {
	document.getElementById("demo").innerHTML = str;
}

function aan(string) {
	var firstLetter = string[0]
	if (firstLetter == 'a' || firstLetter == 'e' || firstLetter == 'i' || firstLetter == 'o' || firstLetter == 'u'){
		string = 'an ' + string
	} else {
		string = 'a ' + string
	}
	return string
}

function inside(needle, haystack) {
  var count = haystack.length;
    for(var i = 0; i < count; i++)
    {
        if(haystack[i] === needle){
					return true;
				}
    }
    return false;
}

var animalList = ['albatross', 'alligator', 'alpaca', 'ant', 'anteater', 'antelope', 'ape', 'armadillo','baboon', 'badger', 'bat', 'bear', 'beaver', 'beetle', 'buffalo', 'butterfly', 'camel', 'cat', 'chameleon', 'cheetah', 'chicken', 'chimp', 'chinchilla', 'cobra', 'cow', 'crab', 'crane', 'crow', 'deer', 'dog', 'dolphin', 'donkey', 'dragon', 'dragonfly', 'duck', 'eagle', 'eel', 'elephant', 'emu', 'falcon', 'fish', 'flamingo', 'fox', 'frog', 'giraffe', 'goat', 'goose', 'hamster', 'hedgehog', 'heron', 'hippo', 'hornet', 'horse', 'hummingbird', 'hyena', 'jackal', 'jaguar', 'jellyfish', 'kangaroo mouse', 'kangaroo', 'koala', 'lark', 'lemur', 'lion', 'lizard', 'llama', 'lobster', 'magpie', 'mole', 'mongoose', 'monkey', 'mouse', 'narwhal', 'newt', 'octopus', 'opossum', 'otter', 'owl', 'panda', 'parrot', 'pelican', 'penguin', 'pheasant', 'pig', 'platypus', 'porcupine', 'rabbit', 'raccoon', 'raptor', 'rat', 'rhino', 'sardine', 'scorpion', 'sea horse', 'sea lion', 'seal', 'shark', 'sheep', 'shrew', 'skink', 'skunk', 'sloth', 'slug', 'snail', 'snake', 'songbird', 'spider', 'squid', 'squirrel', 'starfish', 'stingray', 'swan', 'tapir', 'tiger', 'turtle', 'weasel', 'whale', 'wolf', 'wombat', 'worm', 'zebra']

//Code starts here

//Magical Effects 
var magCatList = ['summon']
//var magCatList = ['abilityTo', 'control', 'transform', 'statusEffect', 'immunity', 'bodyChange', 'sensorium', 'summon', 'misc']

//durations
var durationList = ['5 minutes', '10 minutes', '15 minutes', '20 minutes', '30 minutes', '1 hour', '3 hours', '12 hours', '24 hours', '3 days', '7 days', 'a fornight', 'a year', 'a year and a day', '7 years', 'forever', 'wildcard']
var statusDurationList =['30 seconds', '2 minutes', '15 minutes', '1 hour', '3 days']
var goodWildDurations = ['the next full moon', 'justTarget are fully submersed in water', 'justTarget commit an evil act', 'justTarget are overtaken by madness', 'a magic candle in possesiveTarget possesion goes out', 'justTarget anger someone', 'it is no longer necessary']
var wildDurations = goodWildDurations.concat(badWildDurations)
var badWildDurations = ['justTarget earn the love of a willing soul', 'possesiveTarget quest ends', 'justTarget slay a demon', 'justTarget are forgiven', 'justTarget pass on the transformation', 'justTarget keep a vow of silence for a year', 'justTarget cry tears of true sorrow', 'justTarget solve a riddle', 'justTarget are bathed in moonlight', 'justTarget get their revenge']

//targets
var directTargetList = ['You', 'Your chosen target']
var areaTargetList = ['You', 'Your chosen target', 'Everyone in sight', 'Whatever is most important nearby']
var genTargetList = ['You', 'Your chosen target', 'Everyone in sight']

//magCats
var abilityToList = ['hold possesiveTarget breath indefinitely', 'phase through objects', 'turn invisble', 'fly', 'walk on water', 'speak to animals', 'mimic the magic of others', 'speak any language', 'heal injuries and disease', 'dispell curses', 'dispell magic', 'never tire', 'time travel', 'see in the dark', 'read minds', 'communicate telepathically', 'move at super-speed', 'see like an eagle', 'tell truth from lies', 'teleport within possesiveTarget sight range', 'stick to walls', 'shapeshift', 'project force fields', 'move objects with possesiveTarget mind', 'change possesiveTarget size', 'create and control illusions', 'create replicas of possesiveTargetself and merge with the replicas', 'cause things to explode', 'breathe fire', 'create water', 'create fog', 'spit poison', 'spit acid', 'generate ink from possesiveTarget fingertips', 'smell like a bloodhound', 'jump 10 feet upwards', 'astral project', 'disintigrate things upon touching them', 'heal all maladies', 'pass without a trace', 'create portals', 'escape any imprisonment', 'turn into an animal', 'change possesiveTarget age', 'disguise themTargetself perfectly', 'cough up gems', 'feel the emotions of others', 'sense danger', 'sense valuables', 'sense treachery', 'paralyse those justTarget touch']
	var abilityAbsoluteList = ['hold possesiveTarget breath indefinitely', 'never tire', 'move at super-speed', 'see like an eagle', 'cause things to explode', 'smell like a bloodhound', 'jump 10 feet upwards', 'pass without a trace', 'escape any imprisonment', 'turn into an animal', 'disguise themTargetself perfectly', 'cough up gems']
var controlList = ['ants', 'worms', 'beetles', 'butterflies', 'dragonflies', 'eels', 'fish', 'jellyfish', 'plants', 'flowers', 'the dead', 'metal', 'ice', 'electricity', 'stone', 'magnetism', 'minds', "objects touching the controller's skin", 'bees', 'the weather', 'fire', 'shadow', 'water', 'light', 'gravity', 'air', 'earth', 'blood', 'sound', 'emotions', 'density', 'dreams', 'crystals', 'magical fields', 'magma', 'poison', 'smoke', 'sand', 'memories', 'ink', 'the senses of others', 'liquids', 'hair', 'glass', 'paper', 'cloth', 'rope', 'wood', 'velocity', 'monsters', 'money', 'disease', 'ashes', 'acid', 'demons', 'mirrors', 'friction', 'dolls', 'clouds', 'bubbles', 'the ocean', 'gold', 'momentum', 'wire', 'gemstones', 'insects', 'skin', 'candy', 'fungi', 'swords', 'weapons', 'armor', 'rubber', 'sugar', 'salt', 'explosives', 'spherical objects', 'milk', 'heat', 'ceramics', 'wax', 'silver', 'bronze', 'copper', 'aluminum', 'garbage', 'images', 'dice', 'coins', 'the spirit', 'a spectral hand']
var immunityList = ['poison', 'paralysis', 'compulsions', 'emotional manipulation', 'forced sleep', 'exhaustion', 'fear', 'dizziness', 'nausea', 'hunger', 'silencing', 'sickness', 'being stunned', 'brainwashing', 'charm', 'petrification', 'unconciousness', 'curses', 'heat', 'cold', 'electricity', 'bug bites', 'illusions', 'alcohol', 'physical injury', 'mind-reading', 'mind control', 'magic', 'getting wet', 'disease']
var bodyChangeList = ['arms turn into wings', 'body sprouts an eyeball', 'face grows a third eyeball', 'joints grow spiked protrusions', 'skin grows bony armor', 'legs turn into a fin', 'limbs become tentacles', 'head becomes that of a goat', 'left foot turns into a hoof', 'hands grow three new fingers each', 'arms disappear', 'back erupts into wings', 'ears become pointed', 'pupils become splitted', 'forehead grows horns', 'hand is replaced with a hook', 'right eye disappears', 'tongue becomes forked', 'tailbone grows into a real tail', 'head becomes that of an animal', 'eyes shoot lasers', 'neck sprouts gills', 'head grows a bony crest', 'number of arms doubles', 'fingers turn to stone', 'fingers swap hands', 'limbs turn invisible', 'hair grows out', 'upper lip grows a magnificent moustache', 'eyebrows turn orange', 'ears grow to giant sizes', 'nose lengthens', 'body is covered in fish scales', 'mouth is suddenly sewn shut', 'skin is covered in boils', 'ears emit smoke', 'skin grows fur', 'skin grows harmless lumps', 'voice disappears', 'fingers turn to cheese', 'mouth becomes a beak', 'feet swell', 'thumbs turn backwards', 'vision shows only shades of green', 'voice sounds like a bird call', 'voice lowers by wuite a bit', 'voice becomes a squeaky falsetto', 'hair changes color', 'neck grows a foot longer', 'body becomes emaciated', 'face sprouts cat whiskers', 'entire body disintegrates', 'eyes cross involuntarily', 'clothing spontaneously disintegrates']
var statusEffectList = ['poisoned', 'paralyzed', 'blind', 'compelled to dance', 'compelled to laugh uproariously', 'happy', 'sad', 'angry', 'paranoid', 'tied up', 'confused', 'asleep', 'afraid', 'dizzy', 'hungry', 'unable to use magic', 'sick', 'nauseous', 'vomiting', 'bleeding', 'very very sick', 'stunned', 'deaf', 'in a beserker rage', 'brainwashed', 'charmed', 'petrified', 'unconscious', 'jinxed', 'an amnesiac', 'exhausted', 'feeling very calm and peaceful', 'wanted by the law', 'purple', 'blue', 'orange', 'sweaty', 'floating', 'sitting down', 'homesick', 'itchy', 'overwhelmingly charming', 'hiccuping unstopably', 'very very lucky']
	var statusInstantList = ['poisoned', 'tied up', 'asleep', 'hungry', 'sick', 'bleeding', 'very very sick', 'in a beserker rage', 'jinxed', 'exhausted', 'sitting down', 'homesick']
var transformList = ['a dog', 'a horse', 'a skeleton', 'a elephant', 'living metal', 'a fish', 'a pig', 'a duck', 'a dragon', 'a goldfish', 'a sheep', 'a frog', 'a raven', 'a deer', 'a swan', 'a donkey', 'a dove', 'a doll', 'stone', 'a snake', 'a beetle', 'a spider', 'water', 'vapor', 'a giant', 'a child', 'an elderly person', 'a rubber chicken',  'a slime', 'a bird', 'a sword', 'a set of armor', 'a pendant', 'a book', 'a spectral form', 'a flower', 'a monster', 'a being of flame', 'a puddle of ink', 'a crude clay golem', 'smoke', 'a sprkling crystal', 'diamond', 'paper', 'ice', 'dust', 'ashes', 'a piece of coal', 'wood', 'a leper']
var sensoriumList = ['illusion', 'see', 'hear', 'smell', 'taste', 'feel']
	var illusionList = ['bleed from empty eyesockets', 'be surrounded by angry bees', 'have horrifying deformities', 'be spectacularly beautiful']
	var seeList = ['something dark out of the corner of possesiveTarget eye', 'a vision of possesiveTarget gruesome death', 'a dull red glow']
	var hearList = ['tinkling bells', 'something skittering away behind themTargetself', 'a loud whooping noise', 'meowing']
	var smellList = ['rotting flesh', 'a strong scent of lavender', 'fear', 'citrus']
	var tasteList = ['sausage', 'blood', 'rotten fruit', 'chocolate', 'the color green', 'cherry pie', 'melting wax']
	var feelList = ['the touch of spectral hands', "like justTarget can't breathe", 'a crawling sensation like a bug on possesiveTarget skin', 'a pebble in possesiveTarget mouth that cannot be removed', 'the temperature drop sharply', "the overpowering urge to lick whatever justTarget're paying attention to", 'a strong craving for possesiveTarget favorite food']
var summonList = ['spectral weapon', 'perfect meatball sub', 'pond full of carp', 'dragon', 'five course meal', 'earth elemental', 'air elemental', 'water elemental', 'fire elemental', 'hearty sandwich']
	//summonList = summonList.concat(animalList)
	var summonSingleList = ['pond full of carp', 'hearty sandwich']
	var summonCreatureList = ['dragon', 'earth elemental', 'air elemental', 'water elemental', 'fire elemental']
	summonCreatureList = summonCreatureList.concat(animalList)
	var summonPrefixList = ['demonic', 'dire', 'celestial']
	var summonSuffixList = ['appears out of thin air to serve you', 'appears, and immediately attacks']
var miscList = ['thinkSHere justTarget are a', 'attacked by', 'all corpses within a 3-meter radius come back to life', 'find startTarget irresistible', 'find startTarget repugnant', "startTarget can't help but let out a terrific sneeze", 'a pocket dimension is created', 'a burst of sunlight fills the area', 'startTarget now knowSHere the location of something justTarget were searching for', 'you now know the entire hsitory of your chosen target', 'startTarget developSHere an allergy to lies', 'startTarget developSHere an inconvenient allergy', 'a plague of locusts descends on the area', 'all traps within 3 meters glow blue', 'all curses are removed within a 3-meter radius', 'an earthquake wracks the area', 'startTarget suddenly knowSHere something useful', 'a nearby object comes to life', 'everyone in sight bursts into an eerily coordinated song-and-dance routine', 'all vegetation within 3 meters turns to stone', 'everything goes dark', 'startTarget suddenly reverseSHere their alignment', 'you shoot a fireball at your chosen target', 'you shoot lighting at your chosen target', 'you shoot a magic missle at your chosen target', 'your worst fear appears', 'startTarget experience SHere a sudden intelligence boost', 'startTarget growSHere a new limb', 'suddenly, tigers', 'the world turns 90 degrees to the left around you', 'it begins to rain', 'a burst of fireworks', 'a dazzling flash of light', 'flowers sprout in a circle around you']
	var undeadList = ['good as new', 'zombies', 'skeletons', 'vampires', 'liches']
	var attractList = ['animals', 'monsters', 'people justTarget findSHere attractive', 'bugs', 'bees']
	attractList = attractList.concat(animalList)
	var attackList = ['dirty laundry', 'orcs', 'angry bees']
	var thinkAreList = ['teapot', 'king']
	thinkAreList = thinkAreList.concat(animalList)

function myFunction() {
	var magCat = randomPick(magCatList);
	var duration = randomPick(durationList);
	var magic = 'null';
	var append = '';
	var effect = 'effect';
	var targetType = 'null';
	var pluralSwitch = false;

	var directTarget = randomPick(directTargetList);
	var areaTarget = randomPick(areaTargetList);
	var genTarget = randomPick(genTargetList);
	if (directTarget == 'You') {
		directTargetType = true;
	} else {
		directTargetType = false;
	}
	switch(true) {
		case (areaTarget == 'You'):
			areaTargetType = 'you'
			break;
		case (areaTarget == 'Your chosen target' || areaTarget == 'Everyone in sight'):
			areaTargetType = 'they'
			break;
		case (areaTarget == 'Whatever is most important nearby'):
			areaTargetType = 'it'
			break;
	}
	switch(true) {
		case (genTarget == 'You'):
			genTargetType = 'you'
			break;
		case (genTarget == 'Your chosen target'):
			genTargetType = 'target'
			break;
		case (genTarget == 'Everyone in sight'):
			genTargetType = 'every'
			break;
	}

	//Takes care of durations except wildcards
	switch(true) {
		case (duration == 'forever'):
			duration = 'permanently';
			break;
		default:
			duration = 'for ' + duration;
	}

	switch(true) { //Magic FX types switch

		//Direct target FX
		//abilities
		case (magCat== 'abilityTo'):
			effect = randomPick(abilityToList);
			targetType = 'direct';
			if (directTargetType == true) {
				magic = 'You gain the ability to ';
			} else {
				magic = 'Your chosen target gains the ability to ';
			}
			if (inside(effect, abilityAbsoluteList) == false) {
				var notWell = Math.random();
				if (notWell <= 0.3) {
					append = ', but not very well, ';
				} else {
					effect += ' ';
				}
			}
			effect += ' '
			if (duration == 'for wildcard') {
				duration = 'until ' + randomPick(goodWildDurations);
			}
			break;

		//control
		case (magCat == 'control'):
			effect = randomPick(controlList);
			targetType = 'direct'
			if (directTargetType == true) {
				magic = 'You can now control ';
			} else {
				magic = 'Your chosen target can now control ';
			}
			var notWell = Math.random();
			if (notWell <= 0.3) {
				append = ', but not very well, ';
			} else {
				effect += ' ';
			}
			if (duration == 'for wildcard') {
				duration = 'until ' + randomPick(goodWildDurations);
			}
			break;

		//immunity
		case (magCat == 'immunity'):
			effect = randomPick(immunityList) + ' ';
			targetType = 'direct';
			if (directTargetType == true) {
				magic = 'You are now immune to ';
			} else {
				magic = 'Your chosen target is now immune to ';
			}
			if (duration == 'for wildcard') {
				duration = 'until ' + randomPick(goodWildDurations);
			}
			break;

		//body changes
		case (magCat == 'bodyChange'):
			effect = randomPick(bodyChangeList) + ' ';
			targetType = 'direct';
			if (directTargetType == true) {
				magic = 'Your ';
			} else {
				magic = "Your chosen target's ";
			}
			if (duration == 'for wildcard') {
					duration = 'until ' + randomPick(wildDurations);
			}
			break;

		//status effects
		case (magCat == 'statusEffect'):
			effect = randomPick(statusEffectList);
			targetType = 'direct';
			if (directTargetType == true) {
				magic = 'You are now ';
			} else {
				magic = 'Your chosen target is now ';
			}
			if (inside(effect, statusInstantList) == false) {
				duration = 'for ' + randomPick(statusDurationList);
			} else {
				duration = ''
			}
			break;

		//Area target FX
		//transformations
		case (magCat == 'transform'):
			effect = randomPick(transformList) + ' ';
			targetType = 'area';
			switch(true) {
				case (areaTarget == 'You'):
					magic = 'You transform into ';
					break;
				case (areaTarget == 'Your chosen target'):
					magic = 'Your chosen target transforms into ';
					break;
				case (areaTarget == 'Everyone in sight'):
					magic = 'Everyone in sight transforms into '
					break;
				case (areaTarget == 'Whatever is most important nearby'):
					magic = 'Whatever is most important nearby transforms into ';
					break;
			}
			if (duration == 'for wildcard') {
				duration = 'until ' + randomPick(wildDurations);
			}
			break;

		//sensorium
		case (magCat == 'sensorium'):
			effect = randomPick(sensoriumList);
			targetType = 'area';
			duration = ''
			switch(true) {
				case (areaTarget == 'You'):
					magic = 'You ';
					break;
				case (areaTarget == 'Your chosen target'):
					magic = 'Your chosen target ';
					break;
				case (areaTarget == 'Everyone in sight'):
					magic = 'Every person in sight ';
					break;
				case (areaTarget == 'Whatever is most important nearby'):
					areaTargetType = 'you'
					magic = 'You ';
					break;
			} //close target descriptions
			switch(true) {
				case (effect == 'illusion'):
					effect = randomPick(illusionList);
					if (areaTargetType == 'you') {
						magic += 'appear to ';
					} else {
						magic += 'appears to ';
					}
					break;
				case (effect == 'see'):
					effect = randomPick(seeList);
					if (areaTargetType == 'you') {
						magic += 'see ';
					} else {
						magic += 'sees ';
					}
					break;
				case (effect == 'hear'):
					effect = randomPick(hearList);
					if (areaTargetType == 'you') {
						magic += 'hear ';
					} else {
						magic += 'hears ';
					}
					break;
				case (effect == 'smell'):
					effect = randomPick(smellList);
					if (areaTargetType == 'you') {
						magic += 'smell ';
					} else {
						magic += 'smells ';
					}
					break;
				case (effect == 'taste'):
					effect = randomPick(tasteList);
					if (areaTargetType == 'you') {
						magic += 'taste ';
					} else {
						magic += 'tastes ';
					}
					break;
				case (effect == 'feel'):
					effect = randomPick(feelList);
					if (areaTargetType == 'you') {
						magic += 'feel ';
					} else {
						magic += 'feels ';
					}
					break;
			}
		break;

		//Genearal target FX
		//summons
		case (magCat == 'summon'):
			effect = randomPick(summonList);
			targetType = 'gen';
			append = ' suddenly appears';
			magic = '';
			duration = '';
			if (inside(effect, summonCreatureList) == true) {
				var prefix = Math.random();
				if (prefix <= 0.75 && effect.search('elemental') == -1) {
					effect = randomPick(summonPrefixList) + ' ' + effect
				}
				var pluralSummon = Math.random();
				if (pluralSummon <= 0.5 && inside(effect, summonSingleList) == false) {
					pluralSwitch = true
					effect = 'group of ' + effect
				}
				var suffix = Math.random();
				if (suffix <= 0.5) {
					append = ' ' + randomPick(summonSuffixList)
				}
			} else {
				var pluralSummon = Math.random();
				if (pluralSummon <= 50 && inside(effect, summonSingleList) == false) {
					pluralSwitch = true
					effect = 'pile of ' + effect
				}
			}
			effect = aan(effect) + 'PluralTarget';
			
			break;

		//misc
		case (magCat == 'misc'):
			effect = randomPick(miscList);
			targetType = 'gen';
			magic = '';
			switch(true) {
				case (effect == 'all corpses within a 3-meter radius come back to life'):
					effect += ' as ' + randomPick(undeadList)
					break;
				case (effect == 'find startTarget irresistible' || effect == 'find startTarget repugnant'):
					effect = 'all ' + randomPick(attractList) + 's ' + effect + ' ' + duration
					break;
				case (effect == 'attacked by'):
					effect = 'startTarget areIs suddenly ' + effect + ' ' + randomPick(attackList)
					break;
				case (effect == 'thinkSHere justTarget are a'):
					effect = 'startTarget ' + effect + ' ' + randomPick(thinkAreList)
					break;
			}
			duration = '';
			break;
	
	} //close entire magCat switch

 
	// final put-together of sentence
	magic += effect + append + duration + '.';
  
	// replaces placeholders with target-specific words
	switch(true) {
		case (targetType == 'direct'):
			if (directTargetType == true) {
				magic = magic.replace(/justTarget/g, 'you');
				magic = magic.replace(/possesiveTarget/g, 'your');
			} else {
				magic = magic.replace(/justTarget/g, 'they');
				magic = magic.replace(/possesiveTarget/g, 'their');
			}
			break;
		case (targetType == 'area'):
			switch(true){
				case (areaTargetType == 'you'):
					magic = magic.replace(/justTarget/g, 'you');
					magic = magic.replace(/themTarget/g, 'your');
					magic = magic.replace(/possesiveTarget/g, 'your');
					break;
				case (areaTargetType == 'they'):
					magic = magic.replace(/justTarget/g, 'they');
					magic = magic.replace(/themTarget/g, 'them');
					magic = magic.replace(/possesiveTarget/g, 'their');
					break;
				case (areaTargetType == 'it'):
					magic = magic.replace(/justTarget/g, 'it');
					magic = magic.replace(/themTarget/g, 'it');
					magic = magic.replace(/possesiveTarget/g, 'its');
					break;
			}
			break;
		case (targetType == 'gen'):
			switch(true){
				case (genTargetType == 'you'):
					magic = magic.replace(/startTarget/g, 'you');
					magic = magic.replace(/justTarget/g, 'you');
					magic = magic.replace(/themTarget/g, 'your');
					magic = magic.replace(/possesiveTarget/g, 'your');
					magic = magic.replace(/SHere/g, '');
					break;
				case (genTargetType == 'target'):
					magic = magic.replace(/startTarget/g, 'your chosen target');
					magic = magic.replace(/justTarget/g, 'they');
					magic = magic.replace(/themTarget/g, 'them');
					magic = magic.replace(/possesiveTarget/g, 'their');
					magic = magic.replace(/SHere/g, 's');
					magic = magic.replace(/areIs/g, 'is');
					break;
				case (genTargetType == 'every'):
					magic = magic.replace(/startTarget/g, 'every person in sight');
					magic = magic.replace(/justTarget/g, 'they');
					magic = magic.replace(/themTarget/g, 'them');
					magic = magic.replace(/possesiveTarget/g, 'their');
					magic = magic.replace(/SHere/g, 's');
					magic = magic.replace(/areIs/g, 'is');
					break;
			}
			break;
	} // close replacement switch
	if (pluralSwitch == true) {
		magic = magic.replace(/PluralTarget/g, 's')
	} else {
		magic = magic.replace(/PluralTarget/g, '')
	}

	magic = magic.charAt(0).toUpperCase() + magic.slice(1); 
	print(magic)
} //close entire function

</script>

</body>
</html>
